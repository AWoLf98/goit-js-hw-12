{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport '../css/msg-styles.css';\n\nexport default class Render {\n  #loadingMsg;\n  #selector;\n  #lightbox;\n\n  constructor(loadingMsg = 'loader-section', selector = '.gallery') {\n    this.#loadingMsg = loadingMsg;\n    this.#selector = selector;\n    this.#lightbox = new SimpleLightbox(`${this.#selector} a`);\n  }\n\n  showGalery(objData) {\n    const gallery = document.querySelector(this.#selector);\n\n    gallery.innerHTML = '';\n    // у випадку помилки повертає null=false і завдяки || objData.total не перевірятиме одже помилки не буде\n    if (!objData || !objData.total) {\n      this.showErrorMsg();\n      return;\n    }\n    \n    \n    gallery.innerHTML += objData.hits.reduce(\n      (accumulator, currentValue) => {\n        return (\n          accumulator +\n          `<li>\n            <a href=\"${currentValue.largeImageURL}\">\n              <img src=\"${currentValue.webformatURL}\" alt=\"${currentValue.tags}\"/>\n              </a>\n            <ul class=\"img-description\">\n            <li>\n              <span data-header>\n                Likes\n              </span>\n              <span data-count>\n                ${currentValue.likes}\n                </span>\n            </li>\n            <li>\n              <span data-header>\n              Views\n              </span>\n              <span data-count>\n              ${currentValue.views}\n              </span>\n              </li>\n              <li>\n              <span data-header>\n              Comments\n              </span>\n              <span data-count>\n              ${currentValue.comments}\n              </span>\n              </li>\n              <li>\n              <span data-header>\n              Downloads\n              </span>\n              <span data-count>\n                ${currentValue.downloads}\n              </span>\n            </li>\n          </ul>\n        </li>`\n        );\n      },\n      ''\n      ) + '<li><button type=\"button\">Load more</button></li>';\n\n      // this.#lightbox.refresh();\n    }\n\n  toggleLoadingMsg() {\n    document\n      .querySelector(`.${this.#loadingMsg}`)\n      .classList.toggle('visually-hidden');\n  }\n\n  showErrorMsg(\n    msg = 'Sorry, there are no images matching your search query. Please, try again!'\n  ) {\n    iziToast.show({\n      class: 'error-msg',\n      message: msg,\n      messageColor: '#FAFAFB',\n      messageSize: '16',\n      messageLineHeight: '24',\n      theme: 'dark',\n      color: '#EF4040',\n      iconText: 'Close',\n      iconColor: '#FAFAFB',\n      // iconUrl: 'img/button-x.svg',\n      maxWidth: '432',\n      zindex: 999,\n      close: true,\n      closeOnEscape: true,\n      displayMode: 2,\n      position: 'topRight',\n      timeout: 5000,\n      animateInside: false,\n      drag: false,\n      progressBarColor: '#B51B1B',\n    });\n  }\n}\n","import axios from 'axios';\n\nexport default class PixabayAPI {\n  #params;\n\n  constructor() {\n    this.#params = {\n      key: '13766037-6b94ce31e5d6d188a57cfe399',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: 14,\n      page: 0\n    };\n  }\n  async searchImg(q = '') {\n    if (q) {\n      this.#params['q'] = q;\n    }\n    this.#params.page += 1;\n    return await axios.get('https://pixabay.com/api/', {\n      params: this.#params,\n    });\n  }\n}\n","import Render from './js/render-functions.js';\nimport PixabayAPI from './js/pixabay-api.js';\n\nconst renderInst = new Render();\nconst pixabayInst = new PixabayAPI();\n\nconst searchImg = document.querySelector('.form-search');\n\n\nsearchImg.addEventListener('submit', event => {\n  event.preventDefault();\n  const searchTerm = searchImg.elements['search_string'].value.trim();\n  if (!searchTerm) {\n    renderInst.showErrorMsg('Empty field!');\n    return;\n  }\n\n  renderInst.toggleLoadingMsg();\n  pixabayInst.searchImg(searchTerm).then(responce => {\n    renderInst.toggleLoadingMsg();\n    renderInst.showGalery(responce.data);\n    const loadingImg = document.querySelector('li button[type=\"button\"]');\n    loadingImg.addEventListener(\n      'click', () =>\n      pixabayInst.searchImg().then(responce => {\n        renderInst.showGalery(responce.data);\n      })\n    );  \n  });\n});\n\n\n// function loadMoreImg() {\n\n// }\n"],"names":["Render","loadingMsg","selector","__privateAdd","_loadingMsg","_selector","_lightbox","__privateSet","SimpleLightbox","__privateGet","objData","gallery","accumulator","currentValue","msg","iziToast","PixabayAPI","_params","q","axios","renderInst","pixabayInst","searchImg","event","searchTerm","responce"],"mappings":"imCAOe,MAAMA,CAAO,CAK1B,YAAYC,EAAa,iBAAkBC,EAAW,WAAY,CAJlEC,EAAA,KAAAC,EAAA,QACAD,EAAA,KAAAE,EAAA,QACAF,EAAA,KAAAG,EAAA,QAGEC,EAAA,KAAKH,EAAcH,GACnBM,EAAA,KAAKF,EAAYH,GACjBK,EAAA,KAAKD,EAAY,IAAIE,EAAe,GAAGC,EAAA,KAAKJ,EAAS,IAAI,EAC1D,CAED,WAAWK,EAAS,CAClB,MAAMC,EAAU,SAAS,cAAcF,EAAA,KAAKJ,EAAS,EAIrD,GAFAM,EAAQ,UAAY,GAEhB,CAACD,GAAW,CAACA,EAAQ,MAAO,CAC9B,KAAK,aAAY,EACjB,MACD,CAGDC,EAAQ,WAAaD,EAAQ,KAAK,OAChC,CAACE,EAAaC,IAEVD,EACA;AAAA,uBACaC,EAAa,aAAa;AAAA,0BACvBA,EAAa,YAAY,UAAUA,EAAa,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQ5DA,EAAa,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAQpBA,EAAa,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAQlBA,EAAa,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQnBA,EAAa,SAAS;AAAA;AAAA;AAAA;AAAA,eAOlC,EACC,EAAG,mDAGL,CAEH,kBAAmB,CACjB,SACG,cAAc,IAAIJ,EAAA,KAAKL,EAAW,EAAE,EACpC,UAAU,OAAO,iBAAiB,CACtC,CAED,aACEU,EAAM,4EACN,CACAC,EAAS,KAAK,CACZ,MAAO,YACP,QAASD,EACT,aAAc,UACd,YAAa,KACb,kBAAmB,KACnB,MAAO,OACP,MAAO,UACP,SAAU,QACV,UAAW,UAEX,SAAU,MACV,OAAQ,IACR,MAAO,GACP,cAAe,GACf,YAAa,EACb,SAAU,WACV,QAAS,IACT,cAAe,GACf,KAAM,GACN,iBAAkB,SACxB,CAAK,CACF,CACH,CAxGEV,EAAA,YACAC,EAAA,YACAC,EAAA,kBCRa,MAAMU,CAAW,CAG9B,aAAc,CAFdb,EAAA,KAAAc,EAAA,QAGEV,EAAA,KAAKU,EAAU,CACb,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAM,CACZ,EACG,CACD,MAAM,UAAUC,EAAI,GAAI,CACtB,OAAIA,IACFT,EAAA,KAAKQ,GAAQ,EAAOC,GAEtBT,EAAA,KAAKQ,GAAQ,MAAQ,EACd,MAAME,EAAM,IAAI,2BAA4B,CACjD,OAAQV,EAAA,KAAKQ,EACnB,CAAK,CACF,CACH,CArBEA,EAAA,YCAF,MAAMG,EAAa,IAAIpB,EACjBqB,EAAc,IAAIL,EAElBM,EAAY,SAAS,cAAc,cAAc,EAGvDA,EAAU,iBAAiB,SAAUC,GAAS,CAC5CA,EAAM,eAAc,EACpB,MAAMC,EAAaF,EAAU,SAAS,cAAiB,MAAM,OAC7D,GAAI,CAACE,EAAY,CACfJ,EAAW,aAAa,cAAc,EACtC,MACD,CAEDA,EAAW,iBAAgB,EAC3BC,EAAY,UAAUG,CAAU,EAAE,KAAKC,GAAY,CACjDL,EAAW,iBAAgB,EAC3BA,EAAW,WAAWK,EAAS,IAAI,EAChB,SAAS,cAAc,0BAA0B,EACzD,iBACT,QAAS,IACTJ,EAAY,UAAS,EAAG,KAAKI,GAAY,CACvCL,EAAW,WAAWK,EAAS,IAAI,CAC3C,CAAO,CACP,CACA,CAAG,CACH,CAAC"}